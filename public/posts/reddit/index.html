<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>automating youtube shorts with python | xie</title>
<meta name=keywords content="python"><meta name=description content="Abstract Youtube shorts, Instagram reels, Tiktok– these are all short videos. There is one niche in particular, where entertaining background footage is combined with text to speech storytelling that pulls quite a bit of traction and viewership.
Once you look at these videos a little more, you realize how simple they are. Thus, can they be automated?
Yes, they can. Here is a high level overview of how I did it."><meta name=author content="daniel"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon.ico><link rel=apple-touch-icon href=http://localhost:1313/favicon.ico><link rel=mask-icon href=http://localhost:1313/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/reddit/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="automating youtube shorts with python"><meta property="og:description" content="Abstract Youtube shorts, Instagram reels, Tiktok– these are all short videos. There is one niche in particular, where entertaining background footage is combined with text to speech storytelling that pulls quite a bit of traction and viewership.
Once you look at these videos a little more, you realize how simple they are. Thus, can they be automated?
Yes, they can. Here is a high level overview of how I did it."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/reddit/"><meta property="og:image" content="http://localhost:1313/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="og:site_name" content="xie"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Cimage%20path/url%3E"><meta name=twitter:title content="automating youtube shorts with python"><meta name=twitter:description content="Abstract Youtube shorts, Instagram reels, Tiktok– these are all short videos. There is one niche in particular, where entertaining background footage is combined with text to speech storytelling that pulls quite a bit of traction and viewership.
Once you look at these videos a little more, you realize how simple they are. Thus, can they be automated?
Yes, they can. Here is a high level overview of how I did it."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"automating youtube shorts with python","item":"http://localhost:1313/posts/reddit/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"automating youtube shorts with python","name":"automating youtube shorts with python","description":"Abstract Youtube shorts, Instagram reels, Tiktok– these are all short videos. There is one niche in particular, where entertaining background footage is combined with text to speech storytelling that pulls quite a bit of traction and viewership.\nOnce you look at these videos a little more, you realize how simple they are. Thus, can they be automated?\nYes, they can. Here is a high level overview of how I did it.","keywords":["python"],"articleBody":"Abstract Youtube shorts, Instagram reels, Tiktok– these are all short videos. There is one niche in particular, where entertaining background footage is combined with text to speech storytelling that pulls quite a bit of traction and viewership.\nOnce you look at these videos a little more, you realize how simple they are. Thus, can they be automated?\nYes, they can. Here is a high level overview of how I did it.\nIn the picture above, I create a reddit API instance and pull the top 400 comments from the post that I am interested in. The question is, how did I pick the comment I would use for my text to speech?\nEarly on, I was simply taking the top comment and just using that, but I noticed that the text to speech generated was pretty damn boring most of the time. For example, if the question:\nWhat is the most dangerous thing you have ever encountered?\nI would get videos where the story would be… pretty boring LOL. Recycling, Trash Cans, Mosquitos… I needed something that someone would stay and listen to. This led me to implement a way to rank each comment based on how interesting the comment is. How can we do this without human intervention? Large Language Models.\nWhat I did was take each comment that fit the criteria I was looking for…\nif 500 \u003c len(comment) \u003c 700 usable_comments.append(comment) And use the GroqCloud API to score the comment on how interesting it would be to someone who has to listen to it play as text to speech.\nI defined a function called score() which returns an integer score for the comment, and called that function on the usable_comments array. If you were curious, here is the pseudocode for the score function:\n# THIS CODE DOES NOT WORK IT IS JUST FOR THE IDEAS # THIS CODE DOES NOT WORK IT IS JUST FOR THE IDEAS # THIS CODE DOES NOT WORK IT IS JUST FOR THE IDEAS def score(comment: str) -\u003e int: client = groqclient.init() response = completion( {\"system\": \"score this comment...\"}, {\"content\": comment} ) score = response return score To store the data, I created a dictionary that had the comment as the key, and the score as the value.\nscore_map = {} for comment in usable_comments: result: int = score(comment) score_map.add(comment, result) comment_to_use: str = highest_score(score_map.values()) Now that I had the comment that was most interesting I passed it through a chain of functions that would do everything from creating the text to speech to upload it to youtube. This is what the function chain looked like:\ndef main(url, title): submission = start(url) location = f\"videos/{submission.title}/{submission.title}_final.mp4\" output_location = f\"videos/{submission.title}/subtitled.mp4\" create_title_voice_over_tiktok(submission.title, submission.title) add_text_to_image(submission.title) resize_image_width(f\"videos/{submission.title}/{submission.title}.png\", f\"videos/{submission.title}/{submission.title}.png\") create_movie_with_background_na(submission.title) subtitled_location = subtitles(location, output_location) link = youtube(subtitled_location, f\"{title}\", \"reddit\", 10, \"reddit, funny, shorts\", \"public\", False) return location, link # CALLING THE FUNCTION # CALLING THE FUNCTION # CALLING THE FUNCTION main(\"https://www.reddit.com/r/AskReddit/comments/1c7vpsu/what_viral_video_is_fake_but_people_think_its_real/\", \"#shorts\") I’ll break down what each part does. The scoring part was the only complex part of this, the rest is pretty easy to understand.\nstart(url) Takes the url of the reddit post, grabs the comments, and picks a comment to use. It uses the scoring system I explained above. It also creates the text to speech and stores it in the directory structure I made.\nlocation = f\"videos/{submission.title}/{submission.title}_final.mp4\" output_location = f\"videos/{submission.title}/subtitled.mp4\" There are just locations for where the generated videos would be stored. I predefined these so the function arguments wouldn’t be super long.\ncreate_title_voice_over_tiktok(submission.title, submission.title) Creates the voice over for the title of the post. The title is usually a question, and is asked first thing in the video. This definitely could be removed by adding the functionality to the start() function….. lol.\nadd_text_to_image(submission.title) Originally, I was using a selenium script to manually open Firefox, navigate to the reddit post, and take a screenshot of the tag as that was a title. However, if I want to host this in the cloud, I don’t want it to rely on any external browsers. To fix this, I created a template…\nAnd I could simply add the title text on top of it and use that. The add_text_to_image() function takes this template and slaps a title onto it, and stores it in the proper directory.\nresize_image_width(f\"videos/{submission.title}/{submission.title}.png\", f\"videos/{submission.title}/{submission.title}.png\") Reels, tiktok, youtube shorts are all videos with 9x16 aspect ratios, so this just crops the image to fit in my background footage.\ncreate_movie_with_background_na(submission.title) Now that I have all the pieces I need to create a video, this function strings everything together in the order that I defined.\nsubtitled_location = subtitles(location, output_location) This is something that is quite interesting. Subtitling videos is actually quite expensive… websites charge upwards of 30$ a month for subtitling services. However, I found a workaround using OpenAI’s whisper API. This function just adds subtitles and returns the filepath to the video.\nlink = youtube(subtitled_location, f\"{title}\", \"reddit\", 10, \"reddit, funny, shorts\", \"public\", False) Lastly, the video is uploaded to youtube. This is done by using google cloud’s youtube data API, which limits uploads to 6 per day.\nreturn location, link Once the video is uploaded, it returns a link to the newly uploaded short and the file location. The chain is now done, and a watchable, subtitled, and entertaining video is now on my channel.\nCompared to editing videos manually using editing software and paying for subtitling, I think this project was pretty cool to show how much can get done by simply knowing which libraries to use. If people made it this far, here are some libraries that are essential.\nmoviepy whisper opencv PIL numpy if you add @mer49 on discord… you might get the source code.\n","wordCount":"943","inLanguage":"en","image":"http://localhost:1313/%3Cimage%20path/url%3E","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"daniel"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/reddit/"},"publisher":{"@type":"Organization","name":"xie","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="dx (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>dx</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/tags/ title=projects><span>projects</span></a></li><li><a href=http://localhost:1313/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">automating youtube shorts with python</h1><div class=post-meta>daniel&nbsp;|&nbsp;<a href=https://github.com/meeeeredith rel="noopener noreferrer" target=_blank>🪐</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents></nav></div></details></div><div class=post-content><h1 id=abstract>Abstract<a hidden class=anchor aria-hidden=true href=#abstract>#</a></h1><p>Youtube shorts, Instagram reels, Tiktok– these are all short videos. There is one niche in particular, where entertaining background footage is combined with text to speech storytelling that pulls quite a bit of traction and viewership.</p><p>Once you look at these videos a little more, you realize how simple they are. Thus, can they be automated?</p><h1 id=yes-they-can>Yes, they can.<a hidden class=anchor aria-hidden=true href=#yes-they-can>#</a></h1><p>Here is a high level overview of how I did it.</p><p>In the picture above, I create a reddit API instance and pull the top 400 comments from the post that I am interested in. The question is, how did I pick the comment I would use for my text to speech?</p><p>Early on, I was simply taking the <strong>top comment</strong> and just using that, but I noticed that the text to speech generated was pretty damn boring most of the time. For example, if the question:</p><p><code>What is the most dangerous thing you have ever encountered?</code></p><p>I would get videos where the story would be&mldr; pretty boring LOL. Recycling, Trash Cans, Mosquitos&mldr; I needed something that someone would stay and listen to. This led me to implement a way to rank each comment based on how interesting the comment is. How can we do this without human intervention? Large Language Models.</p><p>What I did was take each comment that fit the criteria I was looking for&mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>if</span> <span class=mi>500</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>comment</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>700</span>
</span></span><span class=line><span class=cl>	<span class=n>usable_comments</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>comment</span><span class=p>)</span>
</span></span></code></pre></div><p>And use the <code>GroqCloud API</code> to score the comment on how interesting it would be to someone who has to listen to it play as text to speech.</p><p>I defined a function called <code>score()</code> which returns an integer score for the comment, and called that function on the <code>usable_comments</code> array. If you were curious, here is the pseudocode for the score function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># THIS CODE DOES NOT WORK IT IS JUST FOR THE IDEAS</span>
</span></span><span class=line><span class=cl><span class=c1># THIS CODE DOES NOT WORK IT IS JUST FOR THE IDEAS</span>
</span></span><span class=line><span class=cl><span class=c1># THIS CODE DOES NOT WORK IT IS JUST FOR THE IDEAS</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>score</span><span class=p>(</span><span class=n>comment</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=n>client</span> <span class=o>=</span> <span class=n>groqclient</span><span class=o>.</span><span class=n>init</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>response</span> <span class=o>=</span> <span class=n>completion</span><span class=p>(</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span><span class=s2>&#34;system&#34;</span><span class=p>:</span> <span class=s2>&#34;score this comment...&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span><span class=s2>&#34;content&#34;</span><span class=p>:</span> <span class=n>comment</span><span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>score</span> <span class=o>=</span> <span class=n>response</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>score</span>
</span></span></code></pre></div><p>To store the data, I created a dictionary that had the <em>comment</em> as the key, and the <strong>score</strong> as the value.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>score_map</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>comment</span> <span class=ow>in</span> <span class=n>usable_comments</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>result</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>score</span><span class=p>(</span><span class=n>comment</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>score_map</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>comment</span><span class=p>,</span> <span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=n>comment_to_use</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>highest_score</span><span class=p>(</span><span class=n>score_map</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>
</span></span></code></pre></div><p>Now that I had the comment that was most interesting I passed it through a chain of functions that would do everything from creating the text to speech to upload it to youtube. This is what the function chain looked like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>title</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>submission</span> <span class=o>=</span> <span class=n>start</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>location</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>_final.mp4&#34;</span>
</span></span><span class=line><span class=cl>	<span class=n>output_location</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/subtitled.mp4&#34;</span>
</span></span><span class=line><span class=cl>	<span class=n>create_title_voice_over_tiktok</span><span class=p>(</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>,</span> <span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>add_text_to_image</span><span class=p>(</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>resize_image_width</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				       <span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>create_movie_with_background_na</span><span class=p>(</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>subtitled_location</span> <span class=o>=</span> <span class=n>subtitles</span><span class=p>(</span><span class=n>location</span><span class=p>,</span> <span class=n>output_location</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>link</span> <span class=o>=</span> <span class=n>youtube</span><span class=p>(</span><span class=n>subtitled_location</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>title</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=s2>&#34;reddit&#34;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=s2>&#34;reddit, funny,                    shorts&#34;</span><span class=p>,</span> <span class=s2>&#34;public&#34;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>location</span><span class=p>,</span> <span class=n>link</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CALLING THE FUNCTION</span>
</span></span><span class=line><span class=cl><span class=c1># CALLING THE FUNCTION</span>
</span></span><span class=line><span class=cl><span class=c1># CALLING THE FUNCTION</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>main</span><span class=p>(</span><span class=s2>&#34;https://www.reddit.com/r/AskReddit/comments/1c7vpsu/what_viral_video_is_fake_but_people_think_its_real/&#34;</span><span class=p>,</span> <span class=s2>&#34;#shorts&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>I&rsquo;ll break down what each part does. The scoring part was the only complex part of this, the rest is pretty easy to understand.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>start</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span></code></pre></div><p>Takes the url of the reddit post, grabs the comments, and picks a comment to use. It uses the scoring system I explained above. It also creates the text to speech and stores it in the directory structure I made.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>location</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>_final.mp4&#34;</span>
</span></span><span class=line><span class=cl><span class=n>output_location</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/subtitled.mp4&#34;</span>
</span></span></code></pre></div><p>There are just locations for where the generated videos would be stored. I predefined these so the function arguments wouldn&rsquo;t be super long.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>create_title_voice_over_tiktok</span><span class=p>(</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>,</span> <span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>)</span>
</span></span></code></pre></div><p>Creates the voice over for the title of the post. The title is usually a question, and is asked first thing in the video. This definitely could be removed by adding the functionality to the <code>start()</code> function&mldr;.. lol.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>add_text_to_image</span><span class=p>(</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>)</span>
</span></span></code></pre></div><p>Originally, I was using a selenium script to manually open Firefox, navigate to the reddit post, and take a screenshot of the <code>&lt;h1></code> tag as that was a title. However, if I want to host this in the cloud, I don&rsquo;t want it to rely on any external browsers. To fix this, I created a template&mldr;</p><p>And I could simply add the <code>title text</code> on top of it and use that. The <code>add_text_to_image()</code> function takes this template and slaps a title onto it, and stores it in the proper directory.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>resize_image_width</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>				       <span class=sa>f</span><span class=s2>&#34;videos/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>Reels, tiktok, youtube shorts are all videos with <code>9x16</code> aspect ratios, so this just crops the image to fit in my background footage.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>create_movie_with_background_na</span><span class=p>(</span><span class=n>submission</span><span class=o>.</span><span class=n>title</span><span class=p>)</span>
</span></span></code></pre></div><p>Now that I have all the pieces I need to create a video, this function strings everything together in the order that I defined.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>subtitled_location</span> <span class=o>=</span> <span class=n>subtitles</span><span class=p>(</span><span class=n>location</span><span class=p>,</span> <span class=n>output_location</span><span class=p>)</span>
</span></span></code></pre></div><p>This is something that is quite interesting. Subtitling videos is actually quite expensive&mldr; websites charge upwards of <strong>30$</strong> a month for subtitling services. However, I found a workaround using OpenAI&rsquo;s whisper API. This function just adds subtitles and returns the filepath to the video.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>link</span> <span class=o>=</span> <span class=n>youtube</span><span class=p>(</span><span class=n>subtitled_location</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>title</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=s2>&#34;reddit&#34;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=s2>&#34;reddit, funny,                    shorts&#34;</span><span class=p>,</span> <span class=s2>&#34;public&#34;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
</span></span></code></pre></div><p>Lastly, the video is uploaded to youtube. This is done by using google cloud&rsquo;s youtube data API, which limits uploads to 6 per day.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>return</span> <span class=n>location</span><span class=p>,</span> <span class=n>link</span>
</span></span></code></pre></div><p>Once the video is uploaded, it returns a link to the newly uploaded short and the file location. The chain is now done, and a watchable, subtitled, and entertaining video is now on my channel.</p><p>Compared to editing videos manually using editing software and paying for subtitling, I think this project was pretty cool to show how much can get done by simply knowing which libraries to use. If people made it this far, here are some libraries that are essential.</p><ul><li><code>moviepy</code></li><li><code>whisper</code></li><li><code>opencv</code></li><li><code>PIL</code></li><li><code>numpy</code></li></ul><p>if you add <code>@mer49</code> on discord&mldr; you might get the source code.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/python/>Python</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/linter/><span class=title>Next »</span><br><span>fixing code style with style</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>xie</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>